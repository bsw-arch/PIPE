# PIPE Domain Bot System Configuration

# State management
state_dir: "./state"

# Logging configuration
logging:
  level: "INFO"
  file: "./logs/pipe_bots.log"

# Bot configurations
bots:
  # Pipeline automation bot
  pipeline:
    enabled: true
    check_interval: 30
    log_level: "INFO"
    default_pipelines:
      - id: "build_pipeline"
        name: "Build Pipeline"
        enabled: true
        schedule: null
        stages:
          - name: "checkout"
            type: "task"
            duration: 1
          - name: "build"
            type: "task"
            duration: 3
          - name: "test"
            type: "task"
            duration: 2
          - name: "deploy"
            type: "task"
            duration: 2

      - id: "data_pipeline"
        name: "Data Processing Pipeline"
        enabled: true
        schedule: null
        stages:
          - name: "extract"
            type: "task"
            duration: 2
          - name: "transform"
            type: "task"
            duration: 3
          - name: "load"
            type: "task"
            duration: 2

  # Data processor bot
  data_processor:
    enabled: true
    num_workers: 3
    status_interval: 30
    log_level: "INFO"

  # Monitor bot
  monitor:
    enabled: true
    monitor_interval: 60
    health_check_interval: 30
    silence_threshold_seconds: 300
    error_threshold: 10
    alert_retention_hours: 24
    log_level: "INFO"

  # Integration Hub bot (PIPE AgenticAI Governance)
  integration_hub:
    enabled: true
    check_interval: 30
    log_level: "INFO"
    governance:
      review_required: true
      compliance_tracking: true
      quality_monitoring: true
    supported_domains:
      - BNI
      - BNP
      - AXIS
      - IV
      - EcoX
      - THRIVE
      - DC
      - BU
      - PIPE

  # PR Review bot (PR-QUEST Integration)
  pr_review:
    enabled: true
    check_interval: 60
    log_level: "INFO"
    # GitHub configuration
    github_token: "${GITHUB_TOKEN}"  # Set via environment variable
    monitored_repositories:
      - "bsw-arch/PIPE"
      # Add more repositories as needed
    # PR-QUEST service
    pr_quest_url: "http://pr-quest:8000"
    llm_model: "gpt-4o-mini"  # LLM model for PR-QUEST analysis
    # Quality gate thresholds
    auto_approve_threshold: "NONE"  # Auto-approve if risk is NONE
    flag_review_threshold: "MODERATE"  # Flag for human review if MODERATE
    reject_threshold: "CRITICAL"  # Reject if CRITICAL
    # Human reviewers to request when flagging for review
    human_reviewers:
      - "senior-dev"
      - "tech-lead"
    # Pattern learning
    enable_pattern_learning: true
    pattern_refresh_interval: 3600  # Refresh patterns every hour
